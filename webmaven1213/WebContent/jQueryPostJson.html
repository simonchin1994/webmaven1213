<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Json Post</title>
<script type="text/javascript" 
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
</script>
</head>
<body>
Name:<input type="text" id="name" value="Amy"></br>
Age:<input type="text" id="age" value="20"></br>
<button id="send">Send to Server</button>
<button id="createArray">Create Array</button>
<button id="sendArray">Send Array</button>
<div id="div1">Show Message</div>
<script>
	var data = []; //建名為data的陣列
	function result2(msg){
		$("#div1").html(msg);
	}
	function sendArry(){
		var str = JSON.stringify(data);//把data物件轉成JSON格式
		$.post("JsonArrayServlet",{"strArry":str},result2);
		
	}
	function create(){
		var n = $("#name").val(); //抓取id為name的值
		var a = $("#age").val();
		var obj = new Object(); 
		obj.name = n;
		obj.age = a;
		data.push(obj); //把obj加入data陣列
		alert(JSON.stringify(data));//JSON.stringify() 轉成json格式字串
	}
	function result(data){
		alert(data);
	}
	function execute(){
		var n = $("#name").val();
		var a = $("#age").val();
		var obj = new Object();
		obj.name = n;
		obj.age = a;
		$.post("JsonPostServlet",{"stu":JSON.stringify(obj)},result);
	}
	function start(){
		$("#send").click(execute);
		$("#createArray").click(create);
		$("#sendArray").click(sendArry);
	}
	$(document).ready(start);
</script>

</body>
</html>